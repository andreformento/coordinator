buildscript {

  ext.SPRING_BOOT_VERSION = "1.2.3.RELEASE"

  repositories { mavenCentral() }

  dependencies {
    classpath("org.springframework.boot:spring-boot-gradle-plugin:${SPRING_BOOT_VERSION}")
  }
}

allprojects {
  apply plugin: "idea" 
  apply plugin: 'java'
  apply plugin: 'eclipse-wtp'
  
  sourceCompatibility = 1.8
  targetCompatibility = 1.8
}

subprojects {

  group = 'gmcoringa-coordinator'
  version = '0.0.1'

  repositories {
      mavenCentral()
  }

  archivesBaseName = 'coordinator'
}

// Dependencies
def SPRING_BOOT_VERSION = "1.2.3.RELEASE"
List SPRING = ["org.springframework.boot:spring-boot-starter-web:${SPRING_BOOT_VERSION}", "org.springframework.boot:spring-boot-starter-undertow:${SPRING_BOOT_VERSION}",
  "org.springframework.boot:spring-boot-starter-freemarker:${SPRING_BOOT_VERSION}"]
List TEST = ["junit:junit:4.12", "org.mockito:mockito-core:1.10.19", "org.springframework.boot:spring-boot-starter-test:${SPRING_BOOT_VERSION}"]
List LOGBACK = ["ch.qos.logback:logback-classic:1.1.2", "ch.qos.logback:logback-core:1.1.2"]

def SLF4J = "org.slf4j:slf4j-api:1.7.10"

// Projects
project(':common'){ 
  jar {
    appendix = 'common'
  }

  description = 'Common Dependencies'
}

project(':core'){
  apply plugin: 'spring-boot'

  jar {
    appendix = 'common'
  }

  description = 'Coordinator Core'

  dependencies {

    compile project(':common'), SPRING, SLF4J, 'org.apache.curator:curator-framework:2.7.1'

    runtime LOGBACK

    testCompile TEST
  }

  configurations {
    all*.exclude group: 'log4j'
  }
}

project(':api'){ 
  jar {
    appendix = 'api'
  }

  description = 'Coordinator Rest API'

  dependencies {

    compile project(':common'), SLF4J

    runtime LOGBACK
  }

}
